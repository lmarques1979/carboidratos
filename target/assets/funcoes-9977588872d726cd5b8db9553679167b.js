function inserirLinha(){var a=document.getElementById("clone"),b=document.getElementById("tabelainclusao"),a=a.cloneNode(!0);b.appendChild(a);refeicaoins($(a).closest("tr").find("#qtdalimento")).val("");$(a).closest("tr").find("#alimentoforalista").val("");$(a).closest("tr").find("#carboidratos").val("");$(a).closest("tr").find("#alimentoforalista").removeAttr("readonly");$(a).closest("tr").find("#carboidratos").removeAttr("readonly")}
$(document).on("change",".alimento",function(a){a.preventDefault;a=this.value;var b=$(this).parent().parent();"-1"==a?(b.find("#alimentoforalista").removeAttr("readonly"),b.find("#carboidratos").removeAttr("readonly")):(b.find("#alimentoforalista").attr("readonly","readonly"),b.find("#alimentoforalista").val(""),b.find("#carboidratos").attr("readonly","readonly"),b.find("#carboidratos").val(""))});
$(document).on("change","#refeicaoins",function(a){a.preventDefault;a=this.value;$("#formins");var b=$("#formins").find(".dia").val(),c=$("#formins").find("#mes").val(),d=$("#formins").find("#ano").val();$("#formins").find("#qtdcarboidratos").val("");$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/buscatotalrefeicao/",data:{dia:b,mes:c,ano:d,refeicaoid:a},dataType:"json",success:function(a,c,b){null!=a.total&&(a=a.total.toFixed(2),$("#formins").find("#qtdcarboidratos").val(a))},
error:function(a,c,b){}})});
function carregaContagem(){$("#formins");var a=$("#formins").find(".dia").val(),b=$("#formins").find("#mes").val(),c=$("#formins").find("#ano").val(),d=$("#formins").find("#refeicaoins").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/buscatotalrefeicao/",data:{dia:a,mes:b,ano:c,refeicaoid:d},dataType:"json",success:function(a,c,b){null!=a.total&&($("#formins").find("#qtdcarboidratos").val(""),a=a.total.toFixed(2),$("#formins").find("#qtdcarboidratos").val(a))},error:function(a,
c,b){}})}
function carregaContagemIns(a,b){var c=$(b).closest("tr"),d=$(c).find(".dia").val(),e=$(c).find("#valorglicemiapre").val(),f=$(c).find("#valorglicemiapos").val(),g=$(c).find("#qtdcarboidratos").val(),h=$(c).find("#refeicaoins").val(),k=$("#formins").find("#mes").val(),l=$("#formins").find("#ano").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/carregaCalculoIns",data:{tipo:a,dia:d,mes:k,ano:l,refeicaoid:h,valorglicemiapre:e,valorglicemiapos:f,qtdcarboidratos:g},dataType:"json",
success:function(b,d,e){"0"==a&&null!=b.totalpre&&($(c).find("#qtdinsulinarapidapre").val(""),d=b.totalpre.toFixed(0),$(c).find("#qtdinsulinarapidapre").val(d));"1"==a&&null!=b.totalpos&&($(c).find("#qtdinsulinarapidapos").val(""),b=b.totalpos.toFixed(0),$(c).find("#qtdinsulinarapidapos").val(b))},error:function(a,b,c){for(b=0;b<a.responseJSON.length;)b++}})}
function carregaContagemAlt(a,b){var c=$(b).attr("data-index"),d=$(b).closest("tr"),e=$(d).find("#diaatual"+c).val(),f=$(d).find("#valorglicemiaprealt"+c).val(),g=$(d).find("#valorglicemiaposalt"+c).val(),h=$(d).find("#qtdcarboidratoalt"+c).val(),c=$(d).find("#refeicaoalt"+c).val(),k=$("#formupd").find("#mesalt").val(),l=$("#formupd").find("#anoalt").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/carregaCalculoIns",data:{tipo:a,dia:e,mes:k,ano:l,refeicaoid:c,valorglicemiapre:f,
valorglicemiapos:g,qtdcarboidratos:h},dataType:"json",success:function(b,c,e){"0"==a&&($(d).find("#qtdinsulinarapidaprealt").val(""),null!=b.totalpre&&""!=b.totalpre&&(c=b.totalpre.toFixed(0),$(d).find("#qtdinsulinarapidaprealt").val(c)));"1"==a&&($(d).find("#qtdinsulinarapidaposalt").val(""),null!=b.totalpos&&""!=b.totalpos&&(b=b.totalpos.toFixed(0),$(d).find("#qtdinsulinarapidaposalt").val(b)))},error:function(a,b,c){for(b=0;b<a.responseJSON.length;)b++}})}
$(document).on("change",".valorglicemiaprealt",function(a){a.preventDefault;carregaContagemAlt(0,this)});$(document).on("change",".valorglicemiaposalt",function(a){a.preventDefault;carregaContagemAlt(1,this)});$(document).on("change","#valorglicemiapre",function(a){a.preventDefault;carregaContagemIns(0,this)});$(document).on("change","#valorglicemiapos",function(a){a.preventDefault;carregaContagemIns(1,this)});