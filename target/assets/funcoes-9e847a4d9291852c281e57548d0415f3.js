function inserirLinha(){var a=document.getElementById("clone"),b=document.getElementById("tabelainclusao"),a=a.cloneNode(!0);b.appendChild(a);$(a).closest("tr").find("#qtdalimento").val("");$(a).closest("tr").find("#alimentoforalista").val("");$(a).closest("tr").find("#carboidratos").val("");$(a).closest("tr").find("#alimentoforalista").removeAttr("readonly");$(a).closest("tr").find("#carboidratos").removeAttr("readonly")}
$(document).on("change",".alimento",function(a){a.preventDefault;a=this.value;var b=$(this).parent().parent();"-1"==a?(b.find("#alimentoforalista").removeAttr("readonly"),b.find("#carboidratos").removeAttr("readonly")):(b.find("#alimentoforalista").attr("readonly","readonly"),b.find("#alimentoforalista").val(""),b.find("#carboidratos").attr("readonly","readonly"),b.find("#carboidratos").val(""))});
$(document).on("change","#refeicaoins",function(a){a.preventDefault;a=this.value;$("#formins");var b=$("#formins").find(".dia").val(),d=$("#formins").find("#mes").val(),c=$("#formins").find("#ano").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/buscatotalrefeicao/",data:{dia:b,mes:d,ano:c,refeicaoid:a},dataType:"json",success:function(a,b,c){null!=a.total&&($("#formins").find("#qtdcarboidratos").val(""),a=a.total.toFixed(2),$("#formins").find("#qtdcarboidratos").val(a))},
error:function(a,b,c){}})});
function carregaContagem(){$("#formins");var a=$("#formins").find(".dia").val(),b=$("#formins").find("#mes").val(),d=$("#formins").find("#ano").val(),c=$("#formins").find("#refeicaoins").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/buscatotalrefeicao/",data:{dia:a,mes:b,ano:d,refeicaoid:c},dataType:"json",success:function(a,b,c){null!=a.total&&($("#formins").find("#qtdcarboidratos").val(""),a=a.total.toFixed(2),$("#formins").find("#qtdcarboidratos").val(a))},error:function(a,
b,c){}})}
function carregaContagemIns(a){$("#formins");var b=$("#formins").find(".dia").val(),d=$("#formins").find("#mes").val(),c=$("#formins").find("#ano").val(),e=$("#formins").find("#valorglicemiapre").val(),f=$("#formins").find("#valorglicemiapos").val(),g=$("#formins").find("#qtdcarboidratos").val(),h=$("#formins").find("#refeicaoins").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/carregaCalculoIns",data:{tipo:a,dia:b,mes:d,ano:c,refeicaoid:h,valorglicemiapre:e,valorglicemiapos:f,
qtdcarboidratos:g},dataType:"json",success:function(b,c,d){"0"==a&&null!=b.totalpre&&($("#formins").find("#qtdinsulinarapidapre").val(""),c=b.totalpre.toFixed(0),$("#formins").find("#qtdinsulinarapidapre").val(c));"1"==a&&null!=b.totalpos&&($("#formins").find("#qtdinsulinarapidapos").val(""),b=b.totalpos.toFixed(0),$("#formins").find("#qtdinsulinarapidapos").val(b))},error:function(a,b,c){for(b=0;b<a.responseJSON.length;)b++}})}
function carregaContagemAlt(a,b){var d=$(b).attr("data-index"),c=$(b).closest("tr"),e=$(c).find("#diaatual"+d).val(),f=$(c).find("#valorglicemiaprealt"+d).val(),g=$(c).find("#valorglicemiaposalt"+d).val(),h=$(c).find("#qtdcarboidratoalt"+d).val(),d=$(c).find("#refeicaoalt"+d).val(),k=$("#formupd").find("#mesalt").val(),l=$("#formupd").find("#anoalt").val();$.ajax({type:"POST",url:"/contagemcarboidratos/itensControleGlicemico/carregaCalculoIns",data:{tipo:a,dia:e,mes:k,ano:l,refeicaoid:d,valorglicemiapre:f,
valorglicemiapos:g,qtdcarboidratos:h},dataType:"json",success:function(b,d,e){"0"==a&&($(c).find("#qtdinsulinarapidaprealt").val(""),null!=b.totalpre&&""!=b.totalpre&&(d=b.totalpre.toFixed(0),$(c).find("#qtdinsulinarapidaprealt").val(d)));"1"==a&&($(c).find("#qtdinsulinarapidaposalt").val(""),null!=b.totalpos&&""!=b.totalpos&&(b=b.totalpos.toFixed(0),$(c).find("#qtdinsulinarapidaposalt").val(b)))},error:function(a,b,c){for(b=0;b<a.responseJSON.length;)b++}})}
$(document).on("change",".valorglicemiaprealt",function(a){a.preventDefault;carregaContagemAlt(0,this)});$(document).on("change",".valorglicemiaposalt",function(a){a.preventDefault;carregaContagemAlt(1,this)});$(document).on("click","#calculapre",function(a){carregaContagemIns(0)});$(document).on("click","#calculapos",function(a){carregaContagemIns(1)});